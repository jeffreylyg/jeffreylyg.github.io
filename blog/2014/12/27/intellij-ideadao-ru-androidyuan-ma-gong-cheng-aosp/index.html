
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>IntelliJ IDEA导入Android源码工程(AOSP) - Stay foolish, stay hungry.</title>
	<meta name="author" content="Jeffrey Lee">

	
	<meta name="description" content="IntelliJ IDEA导入Android源码工程(AOSP) 这篇Blog主要介绍一下在IntelliJ IDEA中如何导入整个Android源码工程。 首先，确保整个Android源码被编译成功了（至于不知道如何下载Android源码和编译源码的同学请自行Google）， &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Stay foolish, stay hungry." type="application/atom+xml">
	
	<link rel="canonical" href="http://jeffreylyg.github.io/blog/2014/12/27/intellij-ideadao-ru-androidyuan-ma-gong-cheng-aosp/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-49505332-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("jeffreylyg@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li><a href="/project">Project</a></li>
    <li><a href="/about">About Me</a></li>
</ul>


<section class="aboutme">
  <p>
    You know ultimately it comes down to taste, it comes down to trying to expose yourself to the best things that humans have done, and try to bring these things into what you are doing. -- Steve Jobs
  </p>
</section>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:jeffreylyg@gmail.com" title="Email">Email</a>
		
		
			<a class="weibo" href="http://www.weibo.com/1917434091" title="Weibo">Weibo</a>
		
		
			<a class="facebook" href="http://www.facebook.com/100002218806429" title="Facebook">Facebook</a>
		
		
			<a class="google" href="https://plus.google.com/107885916422895845697" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/jeffreylyg" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/jeffreylyg" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">IntelliJ IDEA导入Android源码工程(AOSP)</h1>
	<div class="entry-content" itemprop="articleBody"><p>这篇Blog主要介绍一下在IntelliJ IDEA中如何导入整个Android源码工程。</p>

<p>首先，确保整个Android源码被编译成功了（至于不知道如何下载Android源码和编译源码的同学请自行Google），在out目录中所对应的机型目录下成功生成了<strong>system.img</strong>这个文件。接下来就是如何导入的详细步骤了：</p>

<blockquote><p>请注意：接下来的命令都是在你所下载的Android源码的根目录中执行。</p></blockquote>

<!--more-->


<h3>1. 执行如下命令生成idegen.jar文件</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mmm developent/tools/idegen/ -B</span></code></pre></td></tr></table></div></figure>


<h3>2. 按如下命令执行idegen.sh脚本</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>development/tools/idegen/idegen.sh</span></code></pre></td></tr></table></div></figure>


<p>这时如果是导入Android 5.0的源码的话会碰到如下图的问题：</p>

<p><img src="/images/2014-12-27/1.png"></p>

<p>解决办法很简单，先将那个目录随便改个后缀名，等导入完成后改回来就好了。这条命令执行完成后就在Android源码的根目录中生成了android.iml, android.ipr和android.iws三个文件。</p>

<h3>3. 用IntelliJ IDEA直接打开android.ipr这个文件</h3>

<p>这时IntelliJ IDEA就会扫描整个目录并去建立索引了，这个过程是相当耗时间的，大概得一个小时左右，根据电脑的配置决定，所以为了能最大程度地缩短这个时间，在这之前我们有一些准备工作要做。</p>

<h4>增加IntelliJ IDEA所占的内存</h4>

<p>如果是Linux，就在&#8221;IDEA_HOME/bin/idea.vmoptions64&#8221;（如果是mac系统就在&#8221;IntelliJ IDEA.app/Contents/Info.plist&#8221;）中改变&#8221;&ldquo;-Xms -Xmx&#8221;的值，如果是32位系统就修改vmoptions。我的电脑是16G的内存，所以我给Xmx开了1G。</p>

<h3>4.一些后续步骤</h3>

<p>当建立完索引后打开project structure就会在modules中看到如下图所示的很多jar文件的依赖：</p>

<p><img src="/images/2014-12-27/2.png"></p>

<p>这时将除了Module Source 和 1.6 (No libraries)的jar文件都移除了，然后选Module SDK为一个空的java library（官方的说法），其实选对应版本的Android SDK也是没有任何问题的。</p>

<p>IntelliJ IDEA导入Android源码的步骤就这么多，接下来就可以在IntelliJ IDEA中自由自在地阅读源码或进行源码的开发了。</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 Jeffrey Lee -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> -
  Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
</p>

</footer>
			

<script type="text/javascript">
      var disqus_shortname = 'jeffreylyg';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jeffreylyg.github.io/blog/2014/12/27/intellij-ideadao-ru-androidyuan-ma-gong-cheng-aosp/';
        var disqus_url = 'http://jeffreylyg.github.io/blog/2014/12/27/intellij-ideadao-ru-androidyuan-ma-gong-cheng-aosp/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










		</div>
	</div>
</body>
</html>
