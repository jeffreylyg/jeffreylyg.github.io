
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Clang Error: -Wunused-command-line-argument-hard-error-in-future - Stay foolish, stay hungry.</title>
	<meta name="author" content="Jeffrey Lee">

	
	<meta name="description" content="Clang Error: -Wunused-command-line-argument-hard-error-in-future 在公司的电脑上用Octopress搭好个人Blog后进行了一些初步设置后因为工作太忙然后搁那儿就没动了，等周末时间空出来后准备用自己的Mac &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Stay foolish, stay hungry." type="application/atom+xml">
	
	<link rel="canonical" href="http://jeffreylyg.github.io/blog/2014/03/24/clang-error-wunused-command-line-argument-hard-error-in-future/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("jeffreylyg@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li><a href="/project">Project</a></li>
    <li><a href="/about">About Me</a></li>
</ul>


<section class="aboutme">
  <p>
    You know ultimately it comes down to taste, it comes down to trying to expose yourself to the best things that humans have done, and try to bring these things into what you are doing. -- Steve Jobs
  </p>
</section>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:jeffreylyg@gmail.com" title="Email">Email</a>
		
		
			<a class="weibo" href="http://www.weibo.com/1917434091" title="Weibo">Weibo</a>
		
		
			<a class="facebook" href="http://www.facebook.com/100002218806429" title="Facebook">Facebook</a>
		
		
			<a class="google" href="https://plus.google.com/107885916422895845697" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/jeffreylyg" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/jeffreylyg" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Clang Error: -Wunused-command-line-argument-hard-error-in-future</h1>
	<div class="entry-content" itemprop="articleBody"><p>在公司的电脑上用<strong>Octopress</strong>搭好个人Blog后进行了一些初步设置后因为工作太忙然后搁那儿就没动了，等周末时间空出来后准备用自己的Mac Air重新搭建和配置一下Octopress以便以后都用自己的电脑在闲暇的时间来写写博客。在搭建时执行 <code>bundle install</code> 命令时总是报如下的错误：</p>

<!--more-->


<pre><code>Gem::Installer::ExtensionBuildError: ERROR: Failed to   build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb --with-cflags=-w
checking for main() in -lc... yes
creating Makefile

make "DESTDIR="
compiling redcloth_attributes.c
compiling redcloth_inline.c
compiling redcloth_scan.c
linking shared-object redcloth_scan.bundle
clang: error: unknown argument: '-multiply_definedsuppress' [-Wunused-command-line-argument-hard-error-in-future]
clang: note: this will be a hard error (cannot be downgraded to a warning) in the future
make: *** [redcloth_scan.bundle] Error 1


Gem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/RedCloth-4.2.9 for inspection.
Results logged to /Library/Ruby/Gems/2.0.0/gems/RedCloth-4.2.9/ext/redcloth_scan/gem_make.out
An error occurred while installing RedCloth (4.2.9), and Bundler cannot continue.
Make sure that `gem install RedCloth -v '4.2.9'` succeeds before bundling.
</code></pre>

<p>在各种Google和StackOverflow后问题出在<code>clang: error: unknown argument: '-multiply_definedsuppress' [-Wunused-command-line-argument-hard-error-in-future]</code>这句上，原因是更新了最新的Xocde 5.1后的Apple LLVM compiler把所有无法识别的命令行选项当成了错误，下面是<a href="https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/Introduction/Introduction.html">Xcode 5.1 Release Notes</a>中的解释：</p>

<blockquote><p>The Apple LLVM compiler in Xcode 5.1 treats unrecognized command-line options as errors. This issue has been seen when building both Python native extensions and Ruby Gems, where some invalid compiler options are currently specified.</p></blockquote>

<p>很感谢StackOverflow里这篇文章的帮助<a href="http://stackoverflow.com/questions/22352838/ruby-gem-install-json-fails-on-mavericks-and-xcode-5-1-unknown-argument-mul">http://stackoverflow.com/questions/22352838/ruby-gem-install-json-fails-on-mavericks-and-xcode-5-1-unknown-argument-mul</a>.</p>

<p>这个问题有两种解决办法：</p>

<ul>
<li>在Terminal里执行如下命令</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future bundle install 
</span><span class='line'>sudo ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future gem install Gemmodule </span></code></pre></td></tr></table></div></figure>


<p>然而这种方法是一种临时性的解决办法，想要永久性的解决这个问题就要用第二种方法。</p>

<ul>
<li>升级ruby的版本，升级到解决了这个问题的版本就行，貌似是2.0.0-p451，大于等于这个版本的都行，我下面的操作就是升级到了2.1.1版本。</li>
</ul>


<p>ruby的安装有两种方法，分别是<strong>rvm</strong>和<strong>rbenv</strong>，而在执行<code>rvm install ruby</code>命令时又出现了如下蛋疼的错误：</p>

<pre><code>Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.9/x86_64/ruby-2.1.1.
Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.
Checking requirements for osx.
Installing macports...............................................
Error running 'requirements_osx_port_install_port',
showing last 15 lines of /Users/apple/.rvm/log/1395596183_ruby-2.1.1/port_install.log
checking for lockf... yes
checking for flock... yes
checking for setmode... yes
checking for strcasecmp... yes
checking for strncasecmp... yes
checking for strlcpy... yes
checking for copyfile... yes
checking for clearenv... no
checking for sysctlbyname... yes
checking if readlink conforms to POSIX 1003.1a... yes
checking CommonCrypto/CommonDigest.h usability... yes
checking CommonCrypto/CommonDigest.h presence... yes
checking for CommonCrypto/CommonDigest.h... yes
checking for Tcl configuration... configure: error: Can't find Tcl configuration definitions
++ return 1
Requirements installation failed with status: 1.
</code></pre>

<p>于是又用<strong>rbenv</strong>去升级<strong>ruby</strong>。</p>

<p>首先用如下命令安装<strong>Homebrew</strong>：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"</span></code></pre></td></tr></table></div></figure>


<p>然后安装<strong>rbenv</strong>：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew update
</span><span class='line'>brew install rbenv
</span><span class='line'>brew install ruby-build</span></code></pre></td></tr></table></div></figure>


<p>最后安装<strong>ruby</strong>：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rbenv install 2.1.1
</span><span class='line'>rbenv local 2.1.1
</span><span class='line'>rbenv rehash</span></code></pre></td></tr></table></div></figure>


<p>按照第二种方法升级ruby后在Octopress目录下执行<code>bundle install</code>命令，问题解决，然后就可以用<strong>rake</strong>命令进行发布，预览等一系列操作了。</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Jeffrey Lee


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
</body>
</html>
